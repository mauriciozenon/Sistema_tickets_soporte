router.get('/dashboard', async (req, res) => {
  const [porEstado] = await db.query(`
    SELECT estado, COUNT(*) AS cantidad FROM Ticket GROUP BY estado
  `);

  const [porPrioridad] = await db.query(`
    SELECT prioridad, COUNT(*) AS cantidad FROM Ticket GROUP BY prioridad
  `);

  const [porFecha] = await db.query(`
    SELECT DATE(fecha_hora) AS fecha, COUNT(*) AS cantidad
    FROM Ticket
    GROUP BY DATE(fecha_hora)
    ORDER BY fecha DESC
    LIMIT 7
  `);

  res.json({ porEstado, porPrioridad, porFecha });
});const express = require('express');
const router = express.Router();
const db = require('../config/db');